## 分布式和微服务有什么区别

- 分布式是是多台计算机或多个节点组成的系统，各节点之间通过网络进行通信和协作，共同完成一个或多个共享的任务。

  也就是说分布式系统各节点的任务是一致的，之所以要分布式是为了有更好的能力，能更快、更高效地承接任务，如分布式文件系统、分布式数据库

- 微服务是将一个大而全地服务拆分成多个独立的，松耦合的服务单元、这些服务单元可以独立地部署、运行和管理。

## SpringCloud优缺点

### 优点

- 生态丰富：SpringCloud拥有一个庞大的开源生态系统，无论是官方提供的组件还是社区提供的组件，都能很好的满足不同的微服务需求。
- 可扩展性强：SpringCloud提供了多种SPI接口，开发者能够根据需求配置自己的服务注册和发现、负载均衡和熔断规则
- 功能全面：SpringCoud为微服务提供了全方位的支持，包括服务注册与发现、断路器、负载均衡、API网关、链路追踪等，减少了开发者选择和集成第三方组件的复杂性

### 缺点

- 学习曲线陡峭：SpringCloud的组件多并且配置很多、开发者需要掌握每个组件的配置和使用方法
- 性能开销：SpringCloud的部分组件在高并发场景下表现一般，可能成为系统的瓶颈。而且服务之间的调用通常是基于HTTP的REST调用，相比于单体应用，网络开销和序列化和反序列化的开销会显著增加。
- 组件迭代快，管理复杂：SpringCloud的版本更新速度较快，且每个版本的版本管理有时候不统一，开发者需要关注版本兼容性问题，导致系统的升级和维护工作量较大

## 服务熔断和服务降级

### 服务熔断

#### 基本概念

当服务调用失败率不断上升，就会通过中断该服务的请求，防止系统的资源被不断消耗，保证系统整体不被影响

#### 整体流程

熔断器本身处于关闭状态，当服务的调用失败率超过一定阈值熔断器就会被打开，中断该服务的调用。过一段时间熔断器会自动进入半开状态，尝试恢复调用，确保故障恢复后，熔断器就会被关闭，反之继续打开熔断器

#### 实现框架

- Hystrix：Netflix的开源框架，现在已经停止维护
- Resilience4j：轻量级容错框架
- Sentinel：SpringCloudAlibaba体系的框架

### 服务降级

#### 基本概念

在系统压力过大或者部分服务出现故障时，可以通过减少或关闭某些不必要的功能，保证核心功能的正常运行，避免系统崩溃

#### 触发场景和常用方法

- 触发场景：
  - 服务调用超时或失败
  - 系统负载过高（CPU占用率、内存使用率）
  - 下游服务不可用
- 常用方法：
  - 设置降级回调方法，当服务调用超时或失败时，调用降级回调方法
  - 使用缓存数据
  - 对非核心请求直接限流或拒绝

#### 实现框架

- Hystrix：Netflix的开源框架，现在已经停止维护
- Resilience4j：轻量级容错框架
- Sentinel：SpringCloudAlibaba体系的框架

## SpringCloud有哪些注册中心

### Zookeeper

是Apache下的开源项目，基于CP模型，不保证可用性，当Zookeeper的master节点宕机后，会重新进行leader选举，选举会持续30到120s，期间整个服务都是不可用的

### Eureka

是Netflix下开源的服务注册发现框架，基于AP模型，允许短暂的一致性延迟。

Eureka的各个节点是平等的，几个节点挂掉不会影响正常节点的工作，剩余节点仍可以提供注册和查询服务。Eureka客户端在向其它Eureka节点注册时，如果连接失败，会自动切换到其它节点。

### Nacos

是SpringCloudAlibaba的组件，支持CP和AP模型的切换，默认使用AP模型

### Etcd

是k8s默认的注册中心，如果使用k8s体系的系统，可以选择Etcd