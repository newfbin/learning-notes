## 类加载器分类

在说双亲委派机制前，我先说一下类加载器的分类。

Java虚拟机的类加载器从上到下依次是**启动类加载器**、**扩展类加载器**、**系统类加载器**。

在这三个类加载器之外，用户还可以**自定义类加载器**。

这些类加载器之间上下级关系，或者说是父子关系。

## 双亲委派机制

双亲委派机制的工作原理是

- 如果一个类加载器收到类加载请求，它不会先自己加载该类，而是首先委托给父类加载器
- 如果父类加载器还存在父类，则继续向上委托，依次递归，直到到达最顶层的启动类加载器
- 如果父类加载器能够完成类加载任务，则成功返回，如果父类加载器不能完成类加载任务，子类才会尝试加载，这就是双亲委派机制

## 举例

举一个最常见的例子：

如果我们自定义了一个java.lang.Stirng类，因为双亲委派机制的存在，该类会率先使用引导类加载器加载，而引导类加载器会先加载jdk自带的文件，即rt.jar包下的java.lang.Stirng，而不会加载我们自定义的java.lang.String类。

该机制的优点就是保护了java的核心代码。